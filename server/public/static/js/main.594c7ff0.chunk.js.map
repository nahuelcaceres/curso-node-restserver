{"version":3,"sources":["screens/Chat/Chat.js","components/Users/Users.js","utils/Common.js","screens/Dashboard.js","screens/Home.js","screens/Login.js","screens/Join/Join.js","utils/PrivateRoute.js","utils/PublicRoute.js","components/InfoBar/InfoBar.js","icons/onlineIcon.png","icons/closeIcon.png","components/Input/Input.js","components/Message/Message.js","components/Messages/Messages.js","App.js","index.js"],"names":["socket","Users","usuarios","id","map","user","index","name","getToken","sessionStorage","getItem","setUserSession","token","setItem","removeUserSession","removeItem","Dashboard","props","useState","usuariosActivos","setUsuariosActivos","useEffect","io","transports","auth","on","data","console","log","disconnect","className","type","placeholder","autoComplete","value","Home","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","handleLogin","test","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","then","res","json","errors","msg","history","push","catch","onChange","e","target","onKeyPress","event","key","disabled","onClick","Join","room","setRoom","ev","preventDefault","to","PrivateRoute","Component","component","rest","render","pathName","state","from","location","PublicRoute","InfoBar","src","alt","href","Input","message","setMessage","sendMessage","Message","text","isSentByCurrentUser","trimmedName","trim","toLowerCase","ReactEmoji","emojify","Messages","messages","i","Chat","setUsers","setMessages","userStr","parse","getUser","queryString","search","ENDPOINT","uid","emit","off","setTimeout","alert","users","App","authLoading","setAuthLoading","exact","activeClassName","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.594c7ff0.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport queryString from 'query-string';\r\n\r\nimport InfoBar from \"../../components/InfoBar/InfoBar\";\r\nimport Input from \"../../components/Input/Input\";\r\nimport Messages from \"../../components/Messages/Messages\";\r\n\r\nimport { getToken, getUser, removeUserSession } from '../../utils/Common';\r\n\r\nimport './Chat.css';\r\n\r\nlet socket;\r\n\r\nconst Chat = ({ location }) => {\r\n    const [message, setMessage] = useState('');\r\n    const [users, setUsers] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n    const user = getUser();\r\n    const { room } = queryString.parse(location.search);\r\n    const ENDPOINT = 'https://chat-nmc.herokuapp.com/';\r\n\r\n    useEffect(() => {\r\n        console.log(ENDPOINT);\r\n        socket = io(ENDPOINT, {\r\n            transports: ['websocket', 'hola viejo'],\r\n            auth: { \"x-token\": getToken(), data: { uid: user.uid, room: room } },\r\n        })\r\n\r\n        //---- CLEAN UP THE EFFECT\r\n        return (() => {\r\n            removeUserSession();\r\n            socket.emit('disconnect_');\r\n\r\n            socket.off();\r\n        });\r\n        //-------------------------------\r\n\r\n    }, [ENDPOINT, location.search]);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            socket.emit('join', { uid: user.uid, room }, (error) => {\r\n                if (error) {\r\n                    alert(error);\r\n                }\r\n            })\r\n        }, 1000);\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on('message', (message) => {\r\n            setMessages([...messages, message]);\r\n        })\r\n\r\n        socket.on(\"roomData\", ({ users }) => {\r\n            setUsers(users);\r\n        });\r\n\r\n    }, [messages]);\r\n\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (message) {\r\n            socket.emit('sendMessage', message, () => setMessage(''));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"outerContainer\">\r\n            <div className=\"container\">\r\n                <InfoBar room={room} />\r\n                <Messages messages={messages} name={user.name} />\r\n                <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;","import React from 'react';\r\n\r\nconst Users = ({usuarios}) => {\r\n    return (\r\n        <div >\r\n            <h3>Usuarios</h3>\r\n            <hr />\r\n            <ul id=\"ulUsuarios\">\r\n                {\r\n                    usuarios.map((user, index) => {\r\n                        return <li key={index}>{user.name}</li>\r\n                    })}\r\n            </ul>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Users;","\r\nexport const getUser = () => {\r\n    const userStr = sessionStorage.getItem('user');\r\n    \r\n    if(userStr) return JSON.parse(userStr);\r\n    else return null;\r\n\r\n}\r\n\r\nexport const getToken = () => {\r\n    return sessionStorage.getItem('token') || null;\r\n}\r\n\r\nexport const setUserSession = (token, user) => {\r\n    sessionStorage.setItem('token', token);\r\n    sessionStorage.setItem('user', user);\r\n}\r\n\r\nexport const removeUserSession = () => {\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.removeItem('user');\r\n}","import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport Users from '../components/Users/Users';\r\nimport { getToken } from '../utils/Common';\r\n\r\nconst Dashboard = (props) => {\r\n    const [usuariosActivos, setUsuariosActivos] = useState([]);\r\n\r\n    useEffect(() => {\r\n\r\n        const socket = io('http://localhost:8080', {\r\n            transports: ['websocket'],\r\n            auth: { \"x-token\": getToken() },\r\n        })\r\n\r\n        socket.on(\"usuarios-activos\", (data) => {\r\n            console.log({ data });\r\n            setUsuariosActivos(data);\r\n        })\r\n        \r\n        //---- CLEAN UP THE EFFECT\r\n        return (() => {\r\n            socket.disconnect()\r\n        });\r\n        //-------------------------------\r\n\r\n    }, [])\r\n\r\n    // const handleLogout = () => {\r\n    //     removeUserSession();\r\n    //     console.log('dashboard go to /login');\r\n    //     props.history.push('/login');\r\n    // }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            {/* <h2>Welcome {user.name}!</h2> */}\r\n\r\n            <div className=\"row mt-5\">\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Enviar mensaje</h3>\r\n                    <hr />\r\n                    <input type=\"text\" id='txtUid' className=\"form-control mb-2\" placeholder=\"uid\" autoComplete=\"off\" />\r\n                    <input type=\"text\" id='txtMensaje' className=\"form-control mb-2\" placeholder=\"Mensaje\" autoComplete=\"off\" />\r\n\r\n                    <Users usuarios={usuariosActivos} />\r\n                    {/* <h3>Usuarios</h3>\r\n                    <hr />\r\n                    <ul id=\"ulUsuarios\">\r\n                        {\r\n                        usuariosActivos.map((user, index) => {\r\n                            return <li key={index}>{user.name}</li>\r\n                        })}\r\n                    </ul> */}\r\n                </div>\r\n\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Chat completo</h3>\r\n                    <hr />\r\n                    <ul id=\"ulMensajes\">\r\n\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Chat privado</h3>\r\n                    <hr />\r\n                    <ul id=\"ulMensajesPrivados\">\r\n\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <input type=\"button\" value=\"Logout\"  />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dashboard;","import React from 'react';\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div>\r\n            <h2>Welcome to the web chat application</h2>\r\n            <h4>Nahuel Caceres</h4>\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;","import React, { useState } from 'react';\r\nimport { setUserSession } from '../utils/Common';\r\n\r\nconst Login = (props) => {\r\n\r\n    const [email, setEmail] = useState('test1@gmail.com')\r\n    const [password, setPassword] = useState('123456')\r\n    const [error, setError] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleRegister = () => {\r\n\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        if (email === '' || password === '') {\r\n            setError('Completar campos')\r\n            return\r\n        }\r\n\r\n        let regEmail = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        if (!regEmail.test(email)) {\r\n            setError('Invalid Email Address')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-type': 'application/json' },\r\n            body: JSON.stringify({ email: email, password: password }),\r\n            redirect: 'follow'\r\n        };\r\n\r\n        fetch(\"/api/auth/login\", requestOptions)\r\n            .then((res) => (res.json()))\r\n            .then((data) => {\r\n\r\n                if (data.errors) {\r\n                    setError(data.errors[0].msg)\r\n                    setLoading(false)\r\n                    return\r\n                }\r\n\r\n                if (data.msg) {\r\n                    setError(data.msg)\r\n                    setLoading(false)\r\n                    return\r\n                }\r\n\r\n                //TODO: no pasa nada si se guarda el id del usuario en sessionstorage?? es una buena practica?\r\n                setUserSession(data.token, JSON.stringify(data.user))\r\n                props.history.push('/join');\r\n\r\n                setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false)\r\n                setError('Something went wrong. Please try again later.')\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Login</h2>\r\n            <div>\r\n                <input value={email} onChange={e => setEmail(e.target.value)} type=\"email\" placeholder=\"email\" />\r\n            </div>\r\n\r\n            <br />\r\n            <div>\r\n                <input value={password}\r\n                    onChange={e => setPassword(e.target.value)}\r\n                    onKeyPress={event => event.key === 'Enter' ? handleLogin() : null}\r\n                    type=\"password\"\r\n                    placeholder=\"password\" />\r\n            </div>\r\n            <br />\r\n\r\n            {error && <div className='error'>{error}</div>}\r\n\r\n            <input\r\n                type=\"button\"\r\n                value={loading ? \"Loading...\" : \"Login\"}\r\n                disabled={loading}\r\n                onClick={handleLogin}\r\n            />\r\n\r\n            <input\r\n                className='registerButton'\r\n                type=\"button\"\r\n                value={loading ? \"Loading...\" : \"Register\"}\r\n                disabled={loading}\r\n                onClick={handleRegister}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Join.css';\r\n\r\nconst Join = () => {\r\n    const [room, setRoom] = useState('')\r\n\r\n    return (\r\n        <div className=\"joinOuterContainer\">\r\n            <div className=\"joinInnerContainer\">\r\n                <h1 className=\"heading\">Join</h1>\r\n                <div><input placeholder=\"Room\" onChange={(event) => setRoom(event.target.value)} className=\"joinInput mt-20\" type=\"text\" /></div>\r\n                <Link onClick={(ev) => (!room) ? ev.preventDefault() : null} to={`/chat?room=${room}`}>\r\n                    <button className=\"button mt-20\" type=\"submit\">Go</button>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Join;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { getToken } from './Common';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return getToken()\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathName: \"/login\", state: {from: props.location} }} />\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default PrivateRoute;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { getToken } from './Common';\r\n\r\nconst PublicRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return !getToken()\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathName: \"/dashboard\" }} />\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default PublicRoute;","import React, { useEffect } from 'react';\r\n\r\nimport closeIcon from '../../icons/closeIcon.png';\r\nimport onlineIcon from '../../icons/onlineIcon.png';\r\nimport { getUser, removeUserSession } from '../../utils/Common';\r\n\r\nimport './InfoBar.css';\r\n\r\nconst InfoBar = ({ room }) => {\r\n   \r\n    const deleteSessionUser = () => {\r\n        console.log('Deberia ver esto antes de ir a home');\r\n        removeUserSession()\r\n    }\r\n\r\n    return (\r\n        <div className=\"infoBar\">\r\n            <div className=\"leftInnerContainer\">\r\n                <img className=\"onlineIcon\" src={onlineIcon} alt=\"online icon\" />\r\n                <h3>{room}</h3>\r\n            </div>\r\n            <div className=\"rightInnerContainer\">\r\n                <a href=\"/\"><img src={closeIcon} alt=\"close icon\" onClick={deleteSessionUser}/></a>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default InfoBar;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=\"","import React from 'react';\r\n\r\nimport './Input.css';\r\n\r\nconst Input = ({ message, setMessage, sendMessage }) => (\r\n    <form className=\"form\">\r\n        <input\r\n            className=\"input\"\r\n            type=\"text\"\r\n            placeholder=\"Type a message...\"\r\n            value={message}\r\n            onChange={({ target: { value } }) => setMessage(value)}\r\n            onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n        />\r\n        <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n    </form>\r\n)\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nimport './Message.css'\r\n\r\nimport ReactEmoji from 'react-emoji'\r\n\r\nconst Message = ({ message: { user, text }, name }) => {\r\n    let isSentByCurrentUser = false;\r\n\r\n    const trimmedName = name.trim().toLowerCase();\r\n\r\n    if (user === trimmedName) {\r\n        isSentByCurrentUser = true;\r\n    }\r\n\r\n    return (\r\n        isSentByCurrentUser ? (\r\n            <div className=\"messageContainer justifyEnd\">\r\n                <p className=\"sentText pr-10\">{trimmedName}</p>\r\n                <div className=\"messageBox backgroundBlue\">\r\n                    <p className=\"messageText colorWhite\">{ReactEmoji.emojify(text)}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n            : (\r\n                <div className=\"messageContainer justifyStart\">\r\n                    <div className=\"messageBox backgroundLight\">\r\n                        <p className=\"messageText colorDark\">{ReactEmoji.emojify(text)}</p>\r\n                    </div>\r\n                    <p className=\"sentText pl-10 \">{user}</p>\r\n                </div>\r\n            )\r\n    );\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom'\r\n\r\nimport Message from '../Message/Message'\r\n\r\nimport './Messages.css'\r\n\r\nconst Messages = ({messages, name}) => (\r\n    <ScrollToBottom className=\"messages\">\r\n        {messages.map((message, i) => <div key={i}><Message message={message} name={name} /></div>)}\r\n    </ScrollToBottom>\r\n)\r\nexport default Messages;","import React, { useState, useEffect } from 'react'\r\nimport { BrowserRouter, Switch, Route, Link, NavLink } from 'react-router-dom'\r\n\r\nimport Dashboard from './screens/Dashboard';\r\nimport Home from './screens/Home';\r\nimport Login from './screens/Login';\r\nimport Join from './screens/Join/Join';\r\nimport { getToken, removeUserSession, setUserSession } from './utils/Common';\r\nimport PrivateRoute from './utils/PrivateRoute';\r\nimport PublicRoute from './utils/PublicRoute';\r\nimport Chat from './screens/Chat/Chat';\r\n\r\nfunction App() {\r\n  const [authLoading, setAuthLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    fetch(`/api/auth/verifyToken?token=${token}`)\r\n      .then((res) => (res.json()))\r\n      .then((data) => {\r\n\r\n        setUserSession(data.token, data.user)\r\n        setAuthLoading(false)\r\n      })\r\n      .catch((error) => {\r\n        removeUserSession()\r\n        setAuthLoading(false)\r\n      });\r\n\r\n  }, [])\r\n\r\n  if (authLoading && getToken()) {\r\n    return <div className=\"content\">Checking Authentication...</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n\r\n        <div className=\"header\">\r\n          <NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/login\">Login</NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/join\">Join <small>Access with token</small></NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/dashboard\">Dashboard <small>Access with token</small></NavLink>\r\n        </div>\r\n\r\n        <div className=\"content\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <PublicRoute exact path=\"/login\" component={Login} />\r\n            <PrivateRoute exact path=\"/join\" component={Join} />\r\n            <PrivateRoute exact path=\"/chat\" component={Chat} />\r\n            <PrivateRoute exact path=\"/dashboard\" component={Dashboard} />\r\n          </Switch>\r\n        </div>\r\n\r\n      </BrowserRouter>\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}