{"version":3,"sources":["screens/Chat/Chat.js","components/Users/Users.js","utils/Common.js","screens/Dashboard.js","screens/Home.js","screens/Login.js","screens/Join/Join.js","utils/PrivateRoute.js","utils/PublicRoute.js","icons/onlineIcon.png","components/InfoBar/InfoBar.js","icons/closeIcon.png","components/Input/Input.js","components/Message/Message.js","components/Messages/Messages.js","components/TextContainer/TextContainer.js","App.js","index.js"],"names":["socket","Users","usuarios","id","map","user","index","name","getToken","sessionStorage","getItem","setUserSession","token","setItem","removeUserSession","removeItem","Dashboard","props","useState","usuariosActivos","setUsuariosActivos","useEffect","io","transports","auth","on","data","console","log","disconnect","className","type","placeholder","autoComplete","value","Home","href","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","handleLogin","test","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","then","res","json","errors","msg","history","push","catch","onChange","e","target","onKeyPress","event","key","disabled","onClick","Join","room","setRoom","rooms","setRooms","length","aria-label","PrivateRoute","Component","component","rest","render","to","pathName","state","from","location","PublicRoute","InfoBar","src","onlineIcon","alt","Input","message","setMessage","sendMessage","Message","text","isSentByCurrentUser","trimmedName","trim","toLowerCase","ReactEmoji","emojify","Messages","messages","i","TextContainer","users","role","Chat","setUsers","setMessages","userStr","parse","getUser","queryString","search","ENDPOINT","uid","emit","off","setTimeout","alert","preventDefault","App","authLoading","setAuthLoading","exact","activeClassName","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b79b4755.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport queryString from 'query-string';\r\n\r\nimport InfoBar from \"../../components/InfoBar/InfoBar\";\r\nimport Input from \"../../components/Input/Input\";\r\nimport Messages from \"../../components/Messages/Messages\";\r\nimport TextContainer from \"../../components/TextContainer/TextContainer\"\r\n\r\nimport { getToken, getUser, removeUserSession } from '../../utils/Common';\r\n\r\nimport './Chat.css';\r\n\r\nlet socket;\r\n\r\nconst Chat = ({ location }) => {\r\n    const [message, setMessage] = useState('');\r\n    const [users, setUsers] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n    const user = getUser();\r\n    const { room } = queryString.parse(location.search);\r\n    const ENDPOINT = 'https://chat-nmc.herokuapp.com/'; //'http://localhost:8080/' \r\n\r\n    useEffect(() => {\r\n        socket = io(ENDPOINT, {\r\n            transports: ['websocket', 'hola viejo'],\r\n            auth: { \"x-token\": getToken(), data: { uid: user.uid, room: room } },\r\n        })\r\n\r\n        //---- CLEAN UP THE EFFECT\r\n        return (() => {\r\n            removeUserSession();\r\n            socket.emit('disconnect_');\r\n\r\n            socket.off();\r\n        });\r\n        //-------------------------------\r\n\r\n    }, [ENDPOINT, location.search]);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            socket.emit('join', { uid: user.uid, room }, (error) => {\r\n                if (error) {\r\n                    alert(error);\r\n                }\r\n            })\r\n        }, 1000);\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on('message', (message) => {\r\n            setMessages([...messages, message]);\r\n        })\r\n\r\n        socket.on('roomData', ({ users }) => {\r\n            console.log('on roomData');\r\n            console.log({users});\r\n            setUsers(users);\r\n        });\r\n\r\n    }, [messages]);\r\n\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (message) {\r\n            socket.emit('sendMessage', message, () => setMessage(''));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"outerContainer\">\r\n            <div className=\"container\">\r\n                <InfoBar room={room} />\r\n                <Messages messages={messages} name={user.name} />\r\n                <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n            </div>\r\n            <TextContainer users={users} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;","import React from 'react';\r\n\r\nconst Users = ({usuarios}) => {\r\n    return (\r\n        <div >\r\n            <h3>Usuarios</h3>\r\n            <hr />\r\n            <ul id=\"ulUsuarios\">\r\n                {\r\n                    usuarios.map((user, index) => {\r\n                        return <li key={index}>{user.name}</li>\r\n                    })}\r\n            </ul>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Users;","\r\nexport const getUser = () => {\r\n    const userStr = sessionStorage.getItem('user');\r\n    \r\n    if(userStr) return JSON.parse(userStr);\r\n    else return null;\r\n\r\n}\r\n\r\nexport const getToken = () => {\r\n    return sessionStorage.getItem('token') || null;\r\n}\r\n\r\nexport const setUserSession = (token, user) => {\r\n    sessionStorage.setItem('token', token);\r\n    sessionStorage.setItem('user', user);\r\n}\r\n\r\nexport const removeUserSession = () => {\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.removeItem('user');\r\n}","import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport Users from '../components/Users/Users';\r\nimport { getToken } from '../utils/Common';\r\n\r\nconst Dashboard = (props) => {\r\n    const [usuariosActivos, setUsuariosActivos] = useState([]);\r\n\r\n    useEffect(() => {\r\n\r\n        const socket = io('http://localhost:8080', {\r\n            transports: ['websocket'],\r\n            auth: { \"x-token\": getToken() },\r\n        })\r\n\r\n        socket.on(\"usuarios-activos\", (data) => {\r\n            console.log({ data });\r\n            setUsuariosActivos(data);\r\n        })\r\n        \r\n        //---- CLEAN UP THE EFFECT\r\n        return (() => {\r\n            socket.disconnect()\r\n        });\r\n        //-------------------------------\r\n\r\n    }, [])\r\n\r\n    // const handleLogout = () => {\r\n    //     removeUserSession();\r\n    //     console.log('dashboard go to /login');\r\n    //     props.history.push('/login');\r\n    // }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            {/* <h2>Welcome {user.name}!</h2> */}\r\n\r\n            <div className=\"row mt-5\">\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Enviar mensaje</h3>\r\n                    <hr />\r\n                    <input type=\"text\" id='txtUid' className=\"form-control mb-2\" placeholder=\"uid\" autoComplete=\"off\" />\r\n                    <input type=\"text\" id='txtMensaje' className=\"form-control mb-2\" placeholder=\"Mensaje\" autoComplete=\"off\" />\r\n\r\n                    <Users usuarios={usuariosActivos} />\r\n                    {/* <h3>Usuarios</h3>\r\n                    <hr />\r\n                    <ul id=\"ulUsuarios\">\r\n                        {\r\n                        usuariosActivos.map((user, index) => {\r\n                            return <li key={index}>{user.name}</li>\r\n                        })}\r\n                    </ul> */}\r\n                </div>\r\n\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Chat completo</h3>\r\n                    <hr />\r\n                    <ul id=\"ulMensajes\">\r\n\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Chat privado</h3>\r\n                    <hr />\r\n                    <ul id=\"ulMensajesPrivados\">\r\n\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <input type=\"button\" value=\"Logout\"  />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dashboard;","import React from 'react';\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div className='container'>\r\n            <h2 className='text-center'>Web chat application</h2>\r\n            <a className='text-center' href=\"https://www.linkedin.com/in/nahuel-caceres/\">by Nahuel Caceres</a>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;","import React, { useState } from 'react';\r\nimport { setUserSession } from '../utils/Common';\r\n\r\nconst Login = (props) => {\r\n\r\n    const [email, setEmail] = useState('test1@gmail.com')\r\n    const [password, setPassword] = useState('123456')\r\n    const [error, setError] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleRegister = () => {\r\n\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        if (email === '' || password === '') {\r\n            setError('Completar campos')\r\n            return\r\n        }\r\n\r\n        let regEmail = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        if (!regEmail.test(email)) {\r\n            setError('Invalid Email Address')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-type': 'application/json' },\r\n            body: JSON.stringify({ email: email, password: password }),\r\n            redirect: 'follow'\r\n        };\r\n\r\n        fetch(\"/api/auth/login\", requestOptions)\r\n            .then((res) => (res.json()))\r\n            .then((data) => {\r\n\r\n                if (data.errors) {\r\n                    setError(data.errors[0].msg)\r\n                    setLoading(false)\r\n                    return\r\n                }\r\n\r\n                if (data.msg) {\r\n                    setError(data.msg)\r\n                    setLoading(false)\r\n                    return\r\n                }\r\n\r\n                //TODO: no pasa nada si se guarda el id del usuario en sessionstorage?? es una buena practica?\r\n                setUserSession(data.token, JSON.stringify(data.user))\r\n                props.history.push('/join');\r\n\r\n                setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false)\r\n                setError('Something went wrong. Please try again later.')\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <h2 className='text-center'>Login</h2>\r\n            <form>\r\n                <div className=\"mb-3\">\r\n\r\n                    <input value={email} onChange={e => setEmail(e.target.value)} type=\"email\" placeholder=\"email\" className='form-control' />\r\n\r\n                </div>\r\n\r\n                <div className=\"mb-3\">\r\n                    <input value={password}\r\n                        onChange={e => setPassword(e.target.value)}\r\n                        onKeyPress={event => event.key === 'Enter' ? handleLogin() : null}\r\n                        type=\"password\"\r\n                        placeholder=\"password\"\r\n                        className='form-control' />\r\n                </div>\r\n\r\n                {error && <div className='error'>{error}</div>}\r\n\r\n                <input\r\n                    className=\"btn btn-primary\"\r\n                    type=\"button\"\r\n                    value={loading ? \"Loading...\" : \"Login\"}\r\n                    disabled={loading}\r\n                    onClick={handleLogin}\r\n                />\r\n\r\n                <input\r\n                    className='btn btn-secondary registerButton'\r\n                    type=\"button\"\r\n                    value={loading ? \"Loading...\" : \"Register\"}\r\n                    disabled={loading}\r\n                    onClick={handleRegister}\r\n                />\r\n\r\n            </form>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useEffect, useState } from 'react';\r\n\r\nimport './Join.css';\r\n\r\nconst Join = (props) => {\r\n    const [room, setRoom] = useState('')\r\n    const [rooms, setRooms] = useState([])\r\n\r\n    useEffect(() => {\r\n        fetch('api/users/rooms')\r\n            .then((res) => (res.json()))\r\n            .then(data => setRooms(data.rooms))\r\n    }, []);\r\n\r\n    const handleJoin = () => {\r\n\r\n        props.history.push(`/chat?room=${room}`);\r\n    }\r\n\r\n    return (\r\n        <div className=\"joinOuterContainer\">\r\n            <div className=\"joinInnerContainer\">\r\n                <h1 className=\"heading\">Choose a room</h1>\r\n\r\n                {\r\n                    rooms.length > 0 && \r\n                        <div >\r\n                            <select className=\"form-select\" aria-label=\"Default select example\">\r\n                                {rooms.map(( room ) => <option value={room} key={room}>{room}</option>)}\r\n                            </select>\r\n                        </div>\r\n                }\r\n\r\n                <div>\r\n                    <input\r\n                        placeholder=\"Create one\"\r\n                        onChange={(event) => setRoom(event.target.value)}\r\n                        onKeyPress={(event) => event.key === 'Enter' ? handleJoin() : null}\r\n                        className=\"joinInput mt-20\" type=\"text\" />\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Join;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { getToken } from './Common';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return getToken()\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathName: \"/login\", state: {from: props.location} }} />\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default PrivateRoute;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { getToken } from './Common';\r\n\r\nconst PublicRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return !getToken()\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathName: \"/dashboard\" }} />\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default PublicRoute;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","import React, { useEffect } from 'react';\r\n\r\nimport closeIcon from '../../icons/closeIcon.png';\r\nimport onlineIcon from '../../icons/onlineIcon.png';\r\nimport { getUser, removeUserSession } from '../../utils/Common';\r\n\r\nimport './InfoBar.css';\r\n\r\nconst InfoBar = ({ room }) => {\r\n   \r\n    const deleteSessionUser = () => {\r\n        console.log('Deberia ver esto antes de ir a home');\r\n        removeUserSession()\r\n    }\r\n\r\n    return (\r\n        <div className=\"infoBar\">\r\n            <div className=\"leftInnerContainer\">\r\n                <img className=\"onlineIcon\" src={onlineIcon} alt=\"online icon\" />\r\n                <h3>Room: {room}</h3>\r\n            </div>\r\n            <div className=\"rightInnerContainer\">\r\n                <a href=\"/\"><img src={closeIcon} alt=\"close icon\" onClick={deleteSessionUser}/></a>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default InfoBar;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=\"","import React from 'react';\r\n\r\nimport './Input.css';\r\n\r\nconst Input = ({ message, setMessage, sendMessage }) => (\r\n    <form className=\"form\">\r\n        <input\r\n            className=\"input\"\r\n            type=\"text\"\r\n            placeholder=\"Type a message...\"\r\n            value={message}\r\n            onChange={({ target: { value } }) => setMessage(value)}\r\n            onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n        />\r\n        <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n    </form>\r\n)\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nimport './Message.css'\r\n\r\nimport ReactEmoji from 'react-emoji'\r\n\r\nconst Message = ({ message: { user, text }, name }) => {\r\n    let isSentByCurrentUser = false;\r\n\r\n    const trimmedName = name.trim().toLowerCase();\r\n\r\n    if (user === trimmedName) {\r\n        isSentByCurrentUser = true;\r\n    }\r\n\r\n    return (\r\n        isSentByCurrentUser ? (\r\n            <div className=\"messageContainer justifyEnd\">\r\n                <p className=\"sentText pr-10\">{trimmedName}</p>\r\n                <div className=\"messageBox backgroundBlue\">\r\n                    <p className=\"messageText colorWhite\">{ReactEmoji.emojify(text)}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n            : (\r\n                <div className=\"messageContainer justifyStart\">\r\n                    <div className=\"messageBox backgroundLight\">\r\n                        <p className=\"messageText colorDark\">{ReactEmoji.emojify(text)}</p>\r\n                    </div>\r\n                    <p className=\"sentText pl-10 \">{user}</p>\r\n                </div>\r\n            )\r\n    );\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom'\r\n\r\nimport Message from '../Message/Message'\r\n\r\nimport './Messages.css'\r\n\r\nconst Messages = ({messages, name}) => (\r\n    <ScrollToBottom className=\"messages\">\r\n        {messages.map((message, i) => <div key={i}><Message message={message} name={name} /></div>)}\r\n    </ScrollToBottom>\r\n)\r\nexport default Messages;","import React from 'react';\r\n\r\nimport onlineIcon from '../../icons/onlineIcon.png';\r\n\r\nimport './TextContainer.css';\r\n\r\nconst TextContainer = ({ users }) => (\r\n  <div className=\"textContainer\">\r\n    <div>\r\n      <h1>Realtime Chat Application <span role=\"img\" aria-label=\"emoji\">💬</span></h1>\r\n      <h2>Created with React, Express, Node and Socket.IO <span role=\"img\" aria-label=\"emoji\">❤️</span></h2>\r\n      <h2>Try it out right now! <span role=\"img\" aria-label=\"emoji\">⬅️</span></h2>\r\n    </div>\r\n    {\r\n      users\r\n        ? (\r\n          <div>\r\n            <h1>People currently chatting:</h1>\r\n            <div className=\"activeContainer\">\r\n              <h2>\r\n                {users.map(({name}) => (\r\n                  <div key={name} className=\"activeItem\">\r\n                    {name}\r\n                    <img alt=\"Online Icon\" src={onlineIcon}/>\r\n                  </div>\r\n                ))}\r\n              </h2>\r\n            </div>\r\n          </div>\r\n        )\r\n        : null\r\n    }\r\n  </div>\r\n);\r\n\r\nexport default TextContainer;","import React, { useState, useEffect } from 'react'\r\nimport { BrowserRouter, Switch, Route, Link, NavLink } from 'react-router-dom'\r\n\r\nimport Dashboard from './screens/Dashboard';\r\nimport Home from './screens/Home';\r\nimport Login from './screens/Login';\r\nimport Join from './screens/Join/Join';\r\nimport { getToken, removeUserSession, setUserSession } from './utils/Common';\r\nimport PrivateRoute from './utils/PrivateRoute';\r\nimport PublicRoute from './utils/PublicRoute';\r\nimport Chat from './screens/Chat/Chat';\r\n\r\nfunction App() {\r\n  const [authLoading, setAuthLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    fetch(`/api/auth/verifyToken?token=${token}`)\r\n      .then((res) => (res.json()))\r\n      .then((data) => {\r\n\r\n        setUserSession(data.token, data.user)\r\n        setAuthLoading(false)\r\n      })\r\n      .catch((error) => {\r\n        removeUserSession()\r\n        setAuthLoading(false)\r\n      });\r\n\r\n  }, [])\r\n\r\n  if (authLoading && getToken()) {\r\n    return <div className=\"content\">Checking Authentication...</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n\r\n        <div className=\"header\">\r\n          <NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/login\">Login</NavLink>\r\n          {/* <NavLink activeClassName=\"active\" to=\"/join\">Join <small>Access with token</small></NavLink> */}\r\n          {/* <NavLink activeClassName=\"active\" to=\"/dashboard\">Dashboard <small>Access with token</small></NavLink> */}\r\n        </div>\r\n\r\n        <div className=\"content\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <PublicRoute exact path=\"/login\" component={Login} />\r\n            <PrivateRoute exact path=\"/join\" component={Join} />\r\n            <PrivateRoute exact path=\"/chat\" component={Chat} />\r\n            <PrivateRoute exact path=\"/dashboard\" component={Dashboard} />\r\n          </Switch>\r\n        </div>\r\n\r\n      </BrowserRouter>\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}