{"version":3,"sources":["screens/Chat/Chat.js","components/Users/Users.js","utils/Common.js","screens/Dashboard.js","screens/Home.js","screens/Login.js","screens/Join/Join.js","utils/PrivateRoute.js","utils/PublicRoute.js","components/InfoBar/InfoBar.js","icons/onlineIcon.png","icons/closeIcon.png","components/Input/Input.js","components/Message/Message.js","components/Messages/Messages.js","App.js","index.js"],"names":["socket","Users","usuarios","id","map","user","index","name","getToken","sessionStorage","getItem","setUserSession","token","setItem","Dashboard","props","useState","usuariosActivos","setUsuariosActivos","useEffect","io","transports","auth","on","data","console","log","disconnect","className","type","placeholder","autoComplete","value","Home","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","onChange","e","target","disabled","onClick","requestOptions","method","headers","body","JSON","stringify","redirect","fetch","then","res","json","errors","msg","history","push","catch","Join","room","setRoom","event","ev","preventDefault","to","PrivateRoute","Component","component","rest","render","pathName","state","from","location","PublicRoute","InfoBar","src","alt","href","Input","message","setMessage","sendMessage","onKeyPress","key","Message","text","isSentByCurrentUser","trimmedName","trim","toLowerCase","ReactEmoji","emojify","Messages","messages","i","Chat","setUsers","setMessages","userStr","parse","getUser","queryString","search","ENDPOINT","uid","emit","off","setTimeout","alert","users","App","authLoading","setAuthLoading","removeItem","exact","activeClassName","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0cc93ed5.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport queryString from 'query-string';\r\n\r\nimport InfoBar from \"../../components/InfoBar/InfoBar\";\r\nimport Input from \"../../components/Input/Input\";\r\nimport Messages from \"../../components/Messages/Messages\";\r\n\r\nimport { getToken, getUser } from '../../utils/Common';\r\n\r\nimport './Chat.css';\r\n\r\nlet socket;\r\n\r\nconst Chat = ({ location }) => {\r\n    const [message, setMessage] = useState('');\r\n    const [users, setUsers] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n    const user = getUser();\r\n    const { room } = queryString.parse(location.search);\r\n    const ENDPOINT = 'https://chat-nmc.herokuapp.com/';\r\n\r\n    useEffect(() => {\r\n        console.log(ENDPOINT);\r\n        socket = io(ENDPOINT, {\r\n            transports: ['websocket', 'hola viejo'],\r\n            auth: { \"x-token\": getToken(), data: { uid: user.uid, room: room } },\r\n        })\r\n\r\n        //---- CLEAN UP THE EFFECT\r\n        return (() => {\r\n            socket.emit('disconnect_');\r\n\r\n            socket.off();\r\n        });\r\n        //-------------------------------\r\n\r\n    }, [ENDPOINT, location.search]);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            socket.emit('join', { uid: user.uid, room }, (error) => {\r\n                if (error) {\r\n                    alert(error);\r\n                }\r\n            })\r\n        }, 1000);\r\n\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket.on('message', (message) => {\r\n            setMessages([...messages, message]);\r\n        })\r\n\r\n        socket.on(\"roomData\", ({ users }) => {\r\n            setUsers(users);\r\n        });\r\n\r\n    }, [messages]);\r\n\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (message) {\r\n            socket.emit('sendMessage', message, () => setMessage(''));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"outerContainer\">\r\n            <div className=\"container\">\r\n                <InfoBar room={room} />\r\n                <Messages messages={messages} name={user.name} />\r\n                <Input message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Chat;","import React from 'react';\r\n\r\nconst Users = ({usuarios}) => {\r\n    return (\r\n        <div >\r\n            <h3>Usuarios</h3>\r\n            <hr />\r\n            <ul id=\"ulUsuarios\">\r\n                {\r\n                    usuarios.map((user, index) => {\r\n                        return <li key={index}>{user.name}</li>\r\n                    })}\r\n            </ul>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Users;","\r\nexport const getUser = () => {\r\n    const userStr = sessionStorage.getItem('user');\r\n    \r\n    if(userStr) return JSON.parse(userStr);\r\n    else return null;\r\n\r\n}\r\n\r\nexport const getToken = () => {\r\n    return sessionStorage.getItem('token') || null;\r\n}\r\n\r\nexport const setUserSession = (token, user) => {\r\n    sessionStorage.setItem('token', token);\r\n    sessionStorage.setItem('user', user);\r\n}\r\n\r\nexport const removeUserSession = () => {\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.removeItem('user');\r\n}","import React, { useEffect, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport Users from '../components/Users/Users';\r\nimport { getToken } from '../utils/Common';\r\n\r\nconst Dashboard = (props) => {\r\n    const [usuariosActivos, setUsuariosActivos] = useState([]);\r\n\r\n    useEffect(() => {\r\n\r\n        const socket = io('http://localhost:8080', {\r\n            transports: ['websocket'],\r\n            auth: { \"x-token\": getToken() },\r\n        })\r\n\r\n        socket.on(\"usuarios-activos\", (data) => {\r\n            console.log({ data });\r\n            setUsuariosActivos(data);\r\n        })\r\n        \r\n        //---- CLEAN UP THE EFFECT\r\n        return (() => {\r\n            socket.disconnect()\r\n        });\r\n        //-------------------------------\r\n\r\n    }, [])\r\n\r\n    // const handleLogout = () => {\r\n    //     removeUserSession();\r\n    //     console.log('dashboard go to /login');\r\n    //     props.history.push('/login');\r\n    // }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            {/* <h2>Welcome {user.name}!</h2> */}\r\n\r\n            <div className=\"row mt-5\">\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Enviar mensaje</h3>\r\n                    <hr />\r\n                    <input type=\"text\" id='txtUid' className=\"form-control mb-2\" placeholder=\"uid\" autoComplete=\"off\" />\r\n                    <input type=\"text\" id='txtMensaje' className=\"form-control mb-2\" placeholder=\"Mensaje\" autoComplete=\"off\" />\r\n\r\n                    <Users usuarios={usuariosActivos} />\r\n                    {/* <h3>Usuarios</h3>\r\n                    <hr />\r\n                    <ul id=\"ulUsuarios\">\r\n                        {\r\n                        usuariosActivos.map((user, index) => {\r\n                            return <li key={index}>{user.name}</li>\r\n                        })}\r\n                    </ul> */}\r\n                </div>\r\n\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Chat completo</h3>\r\n                    <hr />\r\n                    <ul id=\"ulMensajes\">\r\n\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className=\"col-sm-6\">\r\n                    <h3>Chat privado</h3>\r\n                    <hr />\r\n                    <ul id=\"ulMensajesPrivados\">\r\n\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <input type=\"button\" value=\"Logout\"  />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dashboard;","import React from 'react';\r\n\r\nconst Home = () => {\r\n    return ( \r\n        <div>\r\n            Welcome to the Home Page\"\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Home;","import React, { useState } from 'react';\r\nimport { setUserSession } from '../utils/Common';\r\n\r\nconst Login = (props) => {\r\n\r\n    const [email, setEmail] = useState('test1@gmail.com')\r\n    const [password, setPassword] = useState('123456')\r\n    const [error, setError] = useState(null)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleLogin = () => {\r\n        if (email === '' || password === '') {\r\n            setError('Completar campos')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-type': 'application/json' },\r\n            body: JSON.stringify({ email: email, password: password }),\r\n            redirect: 'follow'\r\n        };\r\n\r\n        fetch(\"/api/auth/login\", requestOptions)\r\n            .then((res) => (res.json()))\r\n            .then((data) => {\r\n\r\n                if (data.errors) {\r\n                    setError(data.errors[0].msg)\r\n                    setLoading(false)\r\n                    return\r\n                }\r\n\r\n                if (data.msg) {\r\n                    setError(data.msg)\r\n                    setLoading(false)\r\n                    return\r\n                }\r\n\r\n                //TODO: no pasa nada si se guarda el id del usuario en sessionstorage?? es una buena practica?\r\n                setUserSession(data.token, JSON.stringify(data.user))\r\n                props.history.push('/join');\r\n\r\n                setLoading(false)\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false)\r\n                console.log(error);\r\n                setError('Something went wrong. Please try again later.')\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Login</h2>\r\n            <div>\r\n                <input value={email} onChange={e => setEmail(e.target.value)} type=\"text\" placeholder=\"username\" />\r\n            </div>\r\n\r\n            <br />\r\n            <div>\r\n                <input value={password} onChange={e => setPassword(e.target.value)} type=\"password\" placeholder=\"password\" />\r\n            </div>\r\n            <br />\r\n\r\n            {error && <div className='error'>{error}</div>}\r\n\r\n            <input\r\n                type=\"button\"\r\n                value={loading ? \"Loading...\" : \"Login\"}\r\n                disabled={loading}\r\n                onClick={handleLogin}\r\n            />\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Join.css';\r\n\r\nconst Join = () => {\r\n    const [room, setRoom] = useState('')\r\n\r\n    return (\r\n        <div className=\"joinOuterContainer\">\r\n            <div className=\"joinInnerContainer\">\r\n                <h1 className=\"heading\">Join</h1>\r\n                <div><input placeholder=\"Room\" onChange={(event) => setRoom(event.target.value)} className=\"joinInput mt-20\" type=\"text\" /></div>\r\n                <Link onClick={(ev) => (!room) ? ev.preventDefault() : null} to={`/chat?room=${room}`}>\r\n                    <button className=\"button mt-20\" type=\"submit\">Unirse</button>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Join;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { getToken } from './Common';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return getToken()\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathName: \"/login\", state: {from: props.location} }} />\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default PrivateRoute;","import React from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { getToken } from './Common';\r\n\r\nconst PublicRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => {\r\n                return !getToken()\r\n                    ? <Component {...props} />\r\n                    : <Redirect to={{ pathName: \"/dashboard\" }} />\r\n            }}\r\n        />\r\n    );\r\n}\r\n\r\nexport default PublicRoute;","import React from 'react';\r\n\r\nimport closeIcon from '../../icons/closeIcon.png';\r\nimport onlineIcon from '../../icons/onlineIcon.png';\r\n\r\nimport './InfoBar.css';\r\n\r\nconst InfoBar = ({ room }) => (\r\n    <div className=\"infoBar\">\r\n        <div className=\"leftInnerContainer\">\r\n            <img className=\"onlineIcon\" src={onlineIcon} alt=\"online icon\" />\r\n            <h3>{room}</h3>\r\n        </div>\r\n        <div className=\"rightInnerContainer\">\r\n            <a href=\"/\"><img src={closeIcon} alt=\"close icon\" /></a>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default InfoBar;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=\"","import React from 'react';\r\n\r\nimport './Input.css';\r\n\r\nconst Input = ({ message, setMessage, sendMessage }) => (\r\n    <form className=\"form\">\r\n        <input\r\n            className=\"input\"\r\n            type=\"text\"\r\n            placeholder=\"Type a message...\"\r\n            value={message}\r\n            onChange={({ target: { value } }) => setMessage(value)}\r\n            onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n        />\r\n        <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n    </form>\r\n)\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nimport './Message.css'\r\n\r\nimport ReactEmoji from 'react-emoji'\r\n\r\nconst Message = ({ message: { user, text }, name }) => {\r\n    let isSentByCurrentUser = false;\r\n\r\n    const trimmedName = name.trim().toLowerCase();\r\n\r\n    if (user === trimmedName) {\r\n        isSentByCurrentUser = true;\r\n    }\r\n\r\n    return (\r\n        isSentByCurrentUser ? (\r\n            <div className=\"messageContainer justifyEnd\">\r\n                <p className=\"sentText pr-10\">{trimmedName}</p>\r\n                <div className=\"messageBox backgroundBlue\">\r\n                    <p className=\"messageText colorWhite\">{ReactEmoji.emojify(text)}</p>\r\n                </div>\r\n            </div>\r\n        )\r\n            : (\r\n                <div className=\"messageContainer justifyStart\">\r\n                    <div className=\"messageBox backgroundLight\">\r\n                        <p className=\"messageText colorDark\">{ReactEmoji.emojify(text)}</p>\r\n                    </div>\r\n                    <p className=\"sentText pl-10 \">{user}</p>\r\n                </div>\r\n            )\r\n    );\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\nimport ScrollToBottom from 'react-scroll-to-bottom'\r\n\r\nimport Message from '../Message/Message'\r\n\r\nimport './Messages.css'\r\n\r\nconst Messages = ({messages, name}) => (\r\n    <ScrollToBottom className=\"messages\">\r\n        {messages.map((message, i) => <div key={i}><Message message={message} name={name} /></div>)}\r\n    </ScrollToBottom>\r\n)\r\nexport default Messages;","import React, { useState, useEffect } from 'react'\r\nimport { BrowserRouter, Switch, Route, Link, NavLink } from 'react-router-dom'\r\n\r\nimport Dashboard from './screens/Dashboard';\r\nimport Home from './screens/Home';\r\nimport Login from './screens/Login';\r\nimport Join from './screens/Join/Join';\r\nimport { getToken, removeUserSession, setUserSession } from './utils/Common';\r\nimport PrivateRoute from './utils/PrivateRoute';\r\nimport PublicRoute from './utils/PublicRoute';\r\nimport Chat from './screens/Chat/Chat';\r\n\r\nfunction App() {\r\n  const [authLoading, setAuthLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    console.log('Estoy por hacer el verifyToken contra la api');\r\n    fetch(`/api/auth/verifyToken?token=${token}`)\r\n      .then((res) => (res.json()))\r\n      .then((data) => {\r\n\r\n        setUserSession(data.token, data.user)\r\n        setAuthLoading(false)\r\n      })\r\n      .catch((error) => {\r\n        removeUserSession()\r\n        setAuthLoading(false)\r\n        console.log(error);\r\n      });\r\n\r\n  }, [])\r\n\r\n  if (authLoading && getToken()) {\r\n    return <div className=\"content\">Checking Authentication...</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n\r\n        <div className=\"header\">\r\n          <NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/login\">Login</NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/join\">Join <small>Access with token</small></NavLink>\r\n          <NavLink activeClassName=\"active\" to=\"/dashboard\">Dashboard <small>Access with token</small></NavLink>\r\n        </div>\r\n\r\n        <div className=\"content\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <PublicRoute exact path=\"/login\" component={Login} />\r\n            <PrivateRoute exact path=\"/join\" component={Join} />\r\n            <PrivateRoute exact path=\"/chat\" component={Chat} />\r\n            <PrivateRoute exact path=\"/dashboard\" component={Dashboard} />\r\n          </Switch>\r\n        </div>\r\n\r\n      </BrowserRouter>\r\n\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}